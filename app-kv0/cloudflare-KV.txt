Cloudflare KVÔºàKey-Value StorageÔºâ„ÅÆ‰∏ªË¶Å„Å™ **„Éó„É≠„Éë„ÉÜ„Ç£„Å®„É°„ÇΩ„ÉÉ„Éâ** „ÇíÊï¥ÁêÜ„Åó„Åæ„Åó„Åü„ÄÇ  

---

## **üìå KV„ÅÆ‰∏ªË¶Å„É°„ÇΩ„ÉÉ„Éâ**
Cloudflare Workers „ÅÆ `env.MY_KV` „Å´ÂØæ„Åó„Å¶Âëº„Å≥Âá∫„Åõ„Çã„É°„ÇΩ„ÉÉ„Éâ„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åô„ÄÇ

### **1Ô∏è‚É£ „Éá„Éº„Çø„Çí‰øùÂ≠òÔºàputÔºâ**
```javascript
await env.MY_KV.put("key", "value");
```
‚úÖ **„Ç≠„Éº (`"key"`) „Å´ `"value"` „Çí‰øùÂ≠ò**  
‚úÖ **„Åô„Åß„Å´„Ç≠„Éº„ÅåÂ≠òÂú®„Åô„ÇãÂ†¥Âêà„ÅØ‰∏äÊõ∏„Åç**  

#### **„Ç™„Éó„Ç∑„Éß„É≥‰ªò„Åç„ÅÆ‰øùÂ≠ò**
```javascript
await env.MY_KV.put("session:12345", "user_data", {
  expiration: 1710000000, // Unix„Çø„Ç§„É†„Çπ„Çø„É≥„ÉóÔºàÁßíÂçò‰ΩçÔºâ
  expirationTtl: 3600,    // 1ÊôÇÈñìÔºàTTLÔºâ
});
```
‚úÖ **`expiration`** ‚Üí ÊåáÂÆö„Åó„Åü Unix „Çø„Ç§„É†ÔºàÁßíÂçò‰ΩçÔºâ„Å´„Éá„Éº„Çø„ÅåÂâäÈô§„Åï„Çå„Çã  
‚úÖ **`expirationTtl`** ‚Üí „Äá„ÄáÁßíÂæå„Å´„Éá„Éº„Çø„ÅåÂâäÈô§„Åï„Çå„Çã  

---

### **2Ô∏è‚É£ „Éá„Éº„Çø„ÇíÂèñÂæóÔºàgetÔºâ**
```javascript
const value = await env.MY_KV.get("key");
console.log(value);
```
‚úÖ **„Ç≠„Éº `"key"` „Å´‰øùÂ≠ò„Åï„Çå„Åü„Éá„Éº„Çø„ÇíÂèñÂæó**  
‚úÖ **„Éá„Éº„Çø„ÅåÂ≠òÂú®„Åó„Å™„ÅÑÂ†¥Âêà„ÅØ `null` „ÇíËøî„Åô**  

#### **JSON„Éá„Éº„Çø„ÅÆÂèñÂæó**
```javascript
const value = await env.MY_KV.get("user:123", { type: "json" });
console.log(value.name); // JSON„Å®„Åó„Å¶Êâ±„Åà„Çã
```
‚úÖ `{ type: "json" }` „ÇíÊåáÂÆö„Åô„Çã„Å® `JSON.parse()` „Åó„Å™„Åè„Å¶„ÇÇOK  

#### **„Éê„Ç§„Éä„É™„Éá„Éº„Çø„ÅÆÂèñÂæó**
```javascript
const binaryData = await env.MY_KV.get("image:123", { type: "arrayBuffer" });
const uint8Array = new Uint8Array(binaryData);
```
‚úÖ `type: "arrayBuffer"` „ÇíÊåáÂÆö„Åô„Çã„Å® **„Éê„Ç§„Éä„É™„Éá„Éº„Çø„Å®„Åó„Å¶ÂèñÂæó** „Åß„Åç„Çã  

---

### **3Ô∏è‚É£ „Éá„Éº„Çø„ÇíÂâäÈô§ÔºàdeleteÔºâ**
```javascript
await env.MY_KV.delete("key");
```
‚úÖ `"key"` „Å´‰øùÂ≠ò„Åï„Çå„Åü„Éá„Éº„Çø„ÇíÂâäÈô§  

---

### **4Ô∏è‚É£ „Ç≠„Éº„ÅÆ‰∏ÄË¶ß„ÇíÂèñÂæóÔºàlistÔºâ**
```javascript
const keys = await env.MY_KV.list();
console.log(keys.keys);
```
‚úÖ **KV„Å´‰øùÂ≠ò„Åï„Çå„Å¶„ÅÑ„Çã„Ç≠„Éº„ÅÆ‰∏ÄË¶ß„ÇíÂèñÂæó**  
‚úÖ `keys` „Å´„Ç≠„Éº„ÅÆÈÖçÂàó„ÅåÂê´„Åæ„Çå„Çã  

#### **ÁâπÂÆö„ÅÆ„Éó„É¨„Éï„Ç£„ÉÉ„ÇØ„ÇπÔºàÊé•È†≠ËæûÔºâ„ÇíÊåáÂÆö**
```javascript
const keys = await env.MY_KV.list({ prefix: "session:" });
console.log(keys.keys);
```
‚úÖ `"session:"` „ÅßÂßã„Åæ„Çã„Ç≠„Éº„Å†„Åë„ÇíÂèñÂæó  

---



Cloudflare KV „Çí‰Ωø„Å£„Åü To-Do List „Ç¢„Éó„É™„Çí‰Ωú„ÇãÂ†¥Âêà„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÊßãÊàê„ÅåËÄÉ„Åà„Çâ„Çå„Åæ„Åô„ÄÇ

### **ÊäÄË°ì„Çπ„Çø„ÉÉ„ÇØ**
- **„Éá„Éº„Çø„Çπ„Éà„Ç¢**: Cloudflare KVÔºà„Ç≠„Éº„Éª„Éê„É™„É•„Éº„Çπ„Éà„Ç¢Ôºâ
- **„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ**: htmx + HTMLÔºà„Ç∑„É≥„Éó„É´„Å™ÊßãÊàêÔºâ
- **„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ**: Cloudflare WorkersÔºàAPI „Çµ„Éº„Éê„ÉºÔºâ
- **„Éá„Éó„É≠„Ç§**: GitHub PagesÔºà„Éï„É≠„É≥„Éà„Ç®„É≥„ÉâÔºâ„ÄÅCloudflare WorkersÔºàAPIÔºâ

### **Ê©üËÉΩ**
1. **„Çø„Çπ„ÇØ„ÅÆËøΩÂä†**
2. **„Çø„Çπ„ÇØ„ÅÆÂèñÂæó**
3. **„Çø„Çπ„ÇØ„ÅÆÂâäÈô§**
4. **„Çø„Çπ„ÇØ„ÅÆÂÆå‰∫Ü„Éû„Éº„ÇØ**

### **Â§ß„Åæ„Åã„Å™ÂÆüË£ÖÊñπÈáù**
1. **Cloudflare Workers** „Åß API „Çí‰ΩúÊàêÔºàKV „ÇíÊìç‰Ωú„Åô„ÇãÔºâ
2. **htmx** „Çí‰Ωø„Å£„Å¶„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ„ÇíÊßãÁØâ
3. **GitHub Pages** „Å´„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ„Çí„Éá„Éó„É≠„Ç§„Åó„ÄÅCloudflare Workers „ÅÆ API „Å®ÈÄ£Êê∫



cd ~
(npm install -g wrangler)
(npm update -g wrangler)
wrangler --version
wrangler login

mkdir kv-app0
wrangler init kv-app0

cd kv-app0
code .



Cloudflare Dashboard ‚Üí KV
Êñ∞„Åó„ÅÑ„Éç„Éº„É†„Çπ„Éö„Éº„Çπ„Çí‰ΩúÊàêÔºà‰æã: `todo`Ôºâ
kv idÁô∫Ë°å ---  

`wrangler.jsonc` „Å´ KV „ÅÆË®≠ÂÆö„ÇíËøΩÂä†:

{
	"$schema": "node_modules/wrangler/config-schema.json",
	"name": "kv-app0",
	"main": "src/index.js",
	"compatibility_date": "2025-03-13",
	"observability": {
		"enabled": true
	},
	"kv_namespaces": [
		{
			"binding": "todo",
			"id": "---"
		}
	]
}


wrangler kv namespace list




### **Cloudflare Workers „ÅÆ„Ç≥„Éº„Éâ**

index.js

export default {
  async fetch(req, env) {
    const url = new URL(req.url);
    if (url.pathname === "/todos") {
      if (req.method === "GET") return getTodos(env);
      if (req.method === "POST") return addTodo(req, env);
    }
    if (url.pathname.startsWith("/todos/")) {
      const id = url.pathname.split("/").pop();
      if (req.method === "DELETE") return deleteTodo(id, env);
      if (req.method === "PUT") return toggleTodo(id, req, env);
    }
    return new Response("Not Found", { status: 404 });
  },
};

// üìå „Åô„Åπ„Å¶„ÅÆ„Çø„Çπ„ÇØ„ÇíÂèñÂæó (GET /todos)
async function getTodos(env) {
  const keys = await env.todo.list();
  const todos = await Promise.all(keys.keys.map(k => env.todo.get(k.name, "json")));
  return new Response(JSON.stringify(todos), { headers: { "Content-Type": "application/json" } });
}

// üìå Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ„ÇíËøΩÂä† (POST /todos)
async function addTodo(req, env) {
  const { title } = await req.json();
  if (!title) return new Response("Title is required", { status: 400 });

  const id = crypto.randomUUID();
  const todo = { id, title, done: false, createdAt: new Date().toISOString() };
  await env.todo.put(id, JSON.stringify(todo));

  return new Response(JSON.stringify(todo), { headers: { "Content-Type": "application/json" } });
}

// üìå „Çø„Çπ„ÇØ„ÇíÂâäÈô§ (DELETE /todos/{id})
async function deleteTodo(id, env) {
  const existing = await env.todo.get(id);
  if (!existing) return new Response("Not Found", { status: 404 });

  await env.todo.delete(id);
  return new Response("Deleted", { status: 200 });
}

// üìå „Çø„Çπ„ÇØ„ÅÆÂÆå‰∫Ü/Êú™ÂÆå‰∫Ü„ÇíÂàá„ÇäÊõø„Åà (PUT /todos/{id})
async function toggleTodo(id, req, env) {
  const existing = await env.todo.get(id, "json");
  if (!existing) return new Response("Not Found", { status: 404 });

  const updatedTodo = { ...existing, done: !existing.done };
  await env.todo.put(id, JSON.stringify(updatedTodo));

  return new Response(JSON.stringify(updatedTodo), { headers: { "Content-Type": "application/json" } });
}


„Åì„ÅÆ„Ç≥„Éº„Éâ„ÅØ„ÄÅCloudflare KV „ÇíÂà©Áî®„Åó„Åü **„Ç∑„É≥„Éó„É´„Å™ To-Do „É™„Çπ„Éà API** „ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ  
„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Åî„Å®„Å´ **GETÔºàÂèñÂæóÔºâ„ÉªPOSTÔºàËøΩÂä†Ôºâ„ÉªDELETEÔºàÂâäÈô§Ôºâ„ÉªPUTÔºàÊõ¥Êñ∞Ôºâ** „ÇíÂÆüË£Ö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

---

# **üìå „Ç≥„Éº„Éâ„ÅÆÊ¶ÇË¶Å**
### **1. „É´„Éº„Éà„ÅÆÂá¶ÁêÜ**
```javascript
export default {
  async fetch(req, env) {
    const url = new URL(req.url);

    if (url.pathname === "/todos") {
      if (req.method === "GET") return getTodos(env);
      if (req.method === "POST") return addTodo(req, env);
    }

    if (url.pathname.startsWith("/todos/")) {
      const id = url.pathname.split("/").pop();
      if (req.method === "DELETE") return deleteTodo(id, env);
      if (req.method === "PUT") return toggleTodo(id, req, env);
    }

    return new Response("Not Found", { status: 404 });
  },
};
```
üîπ **`fetch` „É°„ÇΩ„ÉÉ„Éâ** „ÅØ„ÄÅ„É™„ÇØ„Ç®„Çπ„Éà„ÅÆ URL „Å®„É°„ÇΩ„ÉÉ„Éâ„ÇíÂà§ÂÆö„Åó„Å¶ÈÅ©Âàá„Å™Èñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åó„Åæ„Åô„ÄÇ  
üîπ `env.todo` „ÅØ Cloudflare KV „ÅÆÂêçÂâçÁ©∫Èñì„Åß„Åô„ÄÇ

| **HTTP „É°„ÇΩ„ÉÉ„Éâ** | **„Éë„Çπ**          | **Âá¶ÁêÜ** |
|------------------|------------------|-------------------------|
| `GET`           | `/todos`          | „Åô„Åπ„Å¶„ÅÆ„Çø„Çπ„ÇØ„ÇíÂèñÂæó |
| `POST`          | `/todos`          | Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ„ÇíËøΩÂä† |
| `DELETE`        | `/todos/{id}`     | „Çø„Çπ„ÇØ„ÇíÂâäÈô§ |
| `PUT`           | `/todos/{id}`     | „Çø„Çπ„ÇØ„ÅÆÂÆå‰∫ÜÁä∂ÊÖã„ÇíÂàá„ÇäÊõø„Åà |

---

# **üìå ÂêÑ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÅÆÂá¶ÁêÜ**
## **2. „Åô„Åπ„Å¶„ÅÆ„Çø„Çπ„ÇØ„ÇíÂèñÂæó (`GET /todos`)**
```javascript
async function getTodos(env) {
  const keys = await env.todo.list();
  const todos = await Promise.all(keys.keys.map(k => env.todo.get(k.name, "json")));
  return new Response(JSON.stringify(todos), { headers: { "Content-Type": "application/json" } });
}
```
üîπ **`env.todo.list()`** „Åß KV „Å´‰øùÂ≠ò„Åï„Çå„Å¶„ÅÑ„Çã„Åô„Åπ„Å¶„ÅÆ„Ç≠„ÉºÔºàIDÔºâ„ÇíÂèñÂæó  
üîπ **`env.todo.get(k.name, "json")`** „Åß ID „Å´Á¥ê„Å•„Åè„Çø„Çπ„ÇØ„ÇíÂèñÂæó  
üîπ **`Promise.all()`** „Åß‰∏¶ÂàóÂá¶ÁêÜ„Åó„ÄÅ„Åô„Åπ„Å¶„ÅÆ„Çø„Çπ„ÇØ„Çí JSON „Å®„Åó„Å¶Ëøî„Åô

üìå **„É¨„Çπ„Éù„É≥„Çπ„ÅÆ‰æã**
```json
[
  { "id": "123", "title": "Ë≤∑„ÅÑÁâ©„Å´Ë°å„Åè", "done": false },
  { "id": "456", "title": "ÂãâÂº∑„Åô„Çã", "done": true }
]
```

---

## **3. Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ„ÇíËøΩÂä† (`POST /todos`)**
```javascript
async function addTodo(req, env) {
  const { title } = await req.json();
  if (!title) return new Response("Title is required", { status: 400 });

  const id = crypto.randomUUID();
  const todo = { id, title, done: false, createdAt: new Date().toISOString() };
  await env.todo.put(id, JSON.stringify(todo));

  return new Response(JSON.stringify(todo), { headers: { "Content-Type": "application/json" } });
}
```
üîπ `title` „Çí„É™„ÇØ„Ç®„Çπ„Éà„Éú„Éá„Ç£„Åã„ÇâÂèñÂæóÔºàÂøÖÈ†à„ÉÅ„Çß„ÉÉ„ÇØ„ÅÇ„ÇäÔºâ  
üîπ **UUIDÔºà`crypto.randomUUID()`Ôºâ„Åß‰∏ÄÊÑè„ÅÆ ID „ÇíÁîüÊàê**  
üîπ **‰ΩúÊàêÊó•ÊôÇ (`createdAt`) „Çí‰øùÂ≠ò**  
üîπ KV „Å´ **`id` „Çí„Ç≠„Éº„Å®„Åó„Å¶ JSON „Éá„Éº„Çø„Çí‰øùÂ≠ò**  

üìå **„É™„ÇØ„Ç®„Çπ„Éà**
```json
{ "title": "Ë™≠Êõ∏„Åô„Çã" }
```
üìå **„É¨„Çπ„Éù„É≥„Çπ**
```json
{
  "id": "789",
  "title": "Ë™≠Êõ∏„Åô„Çã",
  "done": false,
  "createdAt": "2025-03-18T12:00:00.000Z"
}
```

---

## **4. „Çø„Çπ„ÇØ„ÇíÂâäÈô§ (`DELETE /todos/{id}`)**
```javascript
async function deleteTodo(id, env) {
  const existing = await env.todo.get(id);
  if (!existing) return new Response("Not Found", { status: 404 });

  await env.todo.delete(id);
  return new Response("Deleted", { status: 200 });
}
```
üîπ **`env.todo.get(id)` „Åß„Çø„Çπ„ÇØ„ÅåÂ≠òÂú®„Åô„Çã„Åã„ÉÅ„Çß„ÉÉ„ÇØ**  
üîπ Â≠òÂú®„Åó„Å™„ÅÑÂ†¥Âêà„ÅØ **404 Not Found** „ÇíËøî„Åô  
üîπ **`env.todo.delete(id)` „ÅßÂâäÈô§**  

üìå **„É™„ÇØ„Ç®„Çπ„Éà**
```http
DELETE /todos/789
```
üìå **„É¨„Çπ„Éù„É≥„Çπ**
```
Deleted
```

---

## **5. „Çø„Çπ„ÇØ„ÅÆÂÆå‰∫Ü/Êú™ÂÆå‰∫Ü„ÇíÂàá„ÇäÊõø„Åà (`PUT /todos/{id}`)**
```javascript
async function toggleTodo(id, req, env) {
  const existing = await env.todo.get(id, "json");
  if (!existing) return new Response("Not Found", { status: 404 });

  const updatedTodo = { ...existing, done: !existing.done };
  await env.todo.put(id, JSON.stringify(updatedTodo));

  return new Response(JSON.stringify(updatedTodo), { headers: { "Content-Type": "application/json" } });
}
```
üîπ **„Çø„Çπ„ÇØ„ÅåÂ≠òÂú®„Åô„Çã„Åã„ÉÅ„Çß„ÉÉ„ÇØ**  
üîπ `done` „Çí **`true ‚áÑ false` „Å´„Éà„Ç∞„É´ÔºàÂàá„ÇäÊõø„ÅàÔºâ**  
üîπ Êõ¥Êñ∞„Åó„Åü„Éá„Éº„Çø„Çí KV „Å´‰øùÂ≠ò„Åó„ÄÅ„É¨„Çπ„Éù„É≥„Çπ„Å®„Åó„Å¶Ëøî„Åô  

üìå **„É™„ÇØ„Ç®„Çπ„Éà**
```http
PUT /todos/789
```
üìå **Â§âÊõ¥Ââç**
```json
{ "id": "789", "title": "Ë™≠Êõ∏„Åô„Çã", "done": false }
```
üìå **Â§âÊõ¥Âæå**
```json
{ "id": "789", "title": "Ë™≠Êõ∏„Åô„Çã", "done": true }
```

---



API „ÅÆ„ÉÜ„Çπ„Éà

## **1. „Çµ„Éº„Éê„Éº„ÅÆËµ∑Âãï**
„Åæ„Åö„ÄÅCloudflare Workers „ÅÆÈñãÁô∫„Çµ„Éº„Éê„Éº„ÇíËµ∑Âãï„Åó„Åæ„Åô„ÄÇ

```sh
npx wrangler dev
```

„Åì„Çå„Åß„ÄÅ`http://localhost:8787` „Åß API „ÅåÂÆüË°å„Åï„Çå„Åæ„Åô„ÄÇ

---

## **2. API „ÅÆÂãï‰ΩúÁ¢∫Ë™ç**

open new terminal

### **„Åô„Åπ„Å¶„ÅÆ„Çø„Çπ„ÇØ„ÇíÂèñÂæó**
```sh
curl -X GET http://localhost:8787/todos
```
**ÊúüÂæÖ„Åï„Çå„Çã„É¨„Çπ„Éù„É≥„Çπ**
```json
[]
```

---

### **Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ„ÇíËøΩÂä†**
```sh
curl -X POST http://localhost:8787/todos \
     -H "Content-Type: application/json" \
     -d '{"title": "Buy groceries"}'
```
**ÊúüÂæÖ„Åï„Çå„Çã„É¨„Çπ„Éù„É≥„Çπ**
```json
{
  "id": "1234-5678-9012",
  "title": "Buy groceries",
  "done": false,
  "createdAt": "2025-03-18T12:34:56.789Z"
}
```
**„É¨„Çπ„Éù„É≥„Çπ„ÅÆ `id` „ÅØ UUID „ÅßÁï∞„Å™„Çã**

---

### **„Çø„Çπ„ÇØ„ÇíÂâäÈô§**
ID „ÇíÁ¢∫Ë™ç„Åó„ÄÅÂâäÈô§„ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ

```sh
curl -X DELETE http://localhost:8787/todos/1234-5678-9012
```
**ÊúüÂæÖ„Åï„Çå„Çã„É¨„Çπ„Éù„É≥„Çπ**
```
Deleted
```

---

### **„Çø„Çπ„ÇØ„ÅÆÂÆå‰∫Ü/Êú™ÂÆå‰∫Ü„ÇíÂàá„ÇäÊõø„Åà**
```sh
curl -X PUT http://localhost:8787/todos/1234-5678-9012
```
**ÊúüÂæÖ„Åï„Çå„Çã„É¨„Çπ„Éù„É≥„Çπ**
```json
{
  "id": "1234-5678-9012",
  "title": "Buy groceries",
  "done": true,
  "createdAt": "2025-03-18T12:34:56.789Z"
}
```

---

### **„Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞„ÅÆÁ¢∫Ë™ç**
#### **„Çø„Ç§„Éà„É´„ÅåÁ©∫„ÅÆ„Çø„Çπ„ÇØ„ÇíËøΩÂä†**
```sh
curl -X POST http://localhost:8787/todos \
     -H "Content-Type: application/json" \
     -d '{}'
```
**ÊúüÂæÖ„Åï„Çå„Çã„É¨„Çπ„Éù„É≥„Çπ**
```
Title is required
```
**„Çπ„ÉÜ„Éº„Çø„Çπ„Ç≥„Éº„Éâ:** `400`

#### **Â≠òÂú®„Åó„Å™„ÅÑ„Çø„Çπ„ÇØ„ÇíÂâäÈô§**
```sh
curl -X DELETE http://localhost:8787/todos/nonexistent-id
```
**ÊúüÂæÖ„Åï„Çå„Çã„É¨„Çπ„Éù„É≥„Çπ**
```
Not Found
```
**„Çπ„ÉÜ„Éº„Çø„Çπ„Ç≥„Éº„Éâ:** `404`

---



cloudflare walkers„Å∏„Éá„Éó„É≠„Ç§

wrangler deploy

„Éá„Éó„É≠„Ç§Âæå„ÅÆ **Êú¨Áï™ URL** (`https://your-worker-url`) „Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ

```sh
curl -X GET https://your-worker-url/todos
```

---



CORS (Cross-Origin Resource Sharing) „ÅÆ„Ç®„É©„Éº„ÅØ„ÄÅ„Çµ„Éº„Éê„ÉºÂÅ¥„ÅßÈÅ©Âàá„Å™ `Access-Control-Allow-Origin` „Éò„ÉÉ„ÉÄ„Éº„ÇíË®≠ÂÆö„Åô„Çã„Åì„Å®„ÅßËß£Ê±∫„Åß„Åç„Åæ„Åô„ÄÇ

---

## **üîß Ëß£Ê±∫Á≠ñ**
„Çµ„Éº„Éê„ÉºÂÅ¥ (`index.js`) „Å´ CORS „Éò„ÉÉ„ÉÄ„Éº„ÇíËøΩÂä†„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ

### **1. ÂÖ±ÈÄö„ÅÆ CORS „Éò„ÉÉ„ÉÄ„ÉºÈñ¢Êï∞„Çí‰ΩúÊàê**
```javascript
function corsHeaders() {
  return {
    "Access-Control-Allow-Origin": "*", // „Åô„Åπ„Å¶„ÅÆ„Ç™„É™„Ç∏„É≥„Åã„Çâ„ÅÆ„É™„ÇØ„Ç®„Çπ„Éà„ÇíË®±ÂèØ
    "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS", // Ë®±ÂèØ„Åô„Çã HTTP „É°„ÇΩ„ÉÉ„Éâ
    "Access-Control-Allow-Headers": "Content-Type", // Ë®±ÂèØ„Åô„Çã„Éò„ÉÉ„ÉÄ„Éº
  };
}
```

---

### **2. `fetch` ÂÜÖ„Åß CORS „Å´ÂØæÂøú**
```javascript
export default {
  async fetch(req, env) {
    const url = new URL(req.url);

    // CORS „Éó„É™„Éï„É©„Ç§„Éà„É™„ÇØ„Ç®„Çπ„Éà (OPTIONS) „Å´ÂØæÂøú
    if (req.method === "OPTIONS") {
      return new Response(null, { headers: corsHeaders() });
    }

    if (url.pathname === "/todos") {
      if (req.method === "GET") return getTodos(env);
      if (req.method === "POST") return addTodo(req, env);
    }

    if (url.pathname.startsWith("/todos/")) {
      const id = url.pathname.split("/").pop();
      if (req.method === "DELETE") return deleteTodo(id, env);
      if (req.method === "PUT") return toggleTodo(id, req, env);
    }

    return new Response("Not Found", { status: 404, headers: corsHeaders() });
  },
};
```

---

### **3. API „ÅÆ„É¨„Çπ„Éù„É≥„Çπ„Å´ CORS „Éò„ÉÉ„ÉÄ„Éº„ÇíËøΩÂä†**
ÂêÑ API Èñ¢Êï∞„ÅÆ `Response` „Å´ `headers: corsHeaders()` „ÇíËøΩÂä†„Åó„Åæ„Åô„ÄÇ

```javascript
async function getTodos(env) {
  const keys = await env.todo.list();
  const todos = await Promise.all(keys.keys.map(k => env.todo.get(k.name, "json")));
  return new Response(JSON.stringify(todos), { headers: { ...corsHeaders(), "Content-Type": "application/json" } });
}

async function addTodo(req, env) {
  const { title } = await req.json();
  if (!title) return new Response("Title is required", { status: 400, headers: corsHeaders() });

  const id = crypto.randomUUID();
  const todo = { id, title, done: false, createdAt: new Date().toISOString() };
  await env.todo.put(id, JSON.stringify(todo));

  return new Response(JSON.stringify(todo), { headers: { ...corsHeaders(), "Content-Type": "application/json" } });
}

async function deleteTodo(id, env) {
  const existing = await env.todo.get(id);
  if (!existing) return new Response("Not Found", { status: 404, headers: corsHeaders() });

  await env.todo.delete(id);
  return new Response("Deleted", { status: 200, headers: corsHeaders() });
}

async function toggleTodo(id, req, env) {
  const existing = await env.todo.get(id, "json");
  if (!existing) return new Response("Not Found", { status: 404, headers: corsHeaders() });

  const updatedTodo = { ...existing, done: !existing.done };
  await env.todo.put(id, JSON.stringify(updatedTodo));

  return new Response(JSON.stringify(updatedTodo), { headers: { ...corsHeaders(), "Content-Type": "application/json" } });
}
```

---



„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ

index.html

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>To-Do List</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				max-width: 400px;
				margin: 20px auto;
			}
			ul {
				list-style: none;
				padding: 0;
			}
			li {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding: 8px;
				border-bottom: 1px solid #ddd;
			}
		</style>
	</head>
	<body>
		<h2>To-Do List</h2>

		<!-- Refresh button -->
		<button id="load">Refresh</button>

		<!-- Task input form -->
		<form id="todo-form">
			<input type="text" id="todo-title" name="title" placeholder="New task" required />
			<button type="submit">Add</button>
		</form>

		<!-- Task list -->
		<ul id="todo-list"></ul>

		<script>
			const url = 'https://kv-app0.muchagorou112.workers.dev';
			const todoForm = document.getElementById('todo-form');
			const todoList = document.getElementById('todo-list');

			// Load tasks when the page loads
			async function loadTodos() {
				const response = await fetch(`${url}/todos`);
				const todos = await response.json();
				renderTodos(todos);
			}

			// Render the task list
			function renderTodos(todos) {
				console.log('Rendering todos:', todos); // Debug log
				todoList.innerHTML = ''; // Clear the list
				todos.forEach((todo) => {
					if (!todo) return;
					const li = document.createElement('li');
					li.dataset.id = todo.id;
					li.innerHTML = `
                    <span>${todo.done ? '‚úÖ' : '‚¨ú'} ${todo.title}</span>
                    <button onclick="toggleTodoStatus('${todo.id}')">Toggle</button>
                    <button onclick="deleteTodo('${todo.id}')">Delete</button>
                	`;
					todoList.appendChild(li);
				});
			}

			// Add a new task
			todoForm.addEventListener('submit', async (event) => {
				event.preventDefault();
				const title = document.getElementById('todo-title').value;
				const response = await fetch(`${url}/todos`, {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({ title }),
				});
				todoForm.reset();
				loadTodos(); // Reload task list
			});

			// Toggle task completion status
			async function toggleTodoStatus(id) {
				const response = await fetch(`${url}/todos/${id}`, {
					method: 'PUT',
				});
				loadTodos(); // Reload task list
			}

			// Delete a task
			async function deleteTodo(id) {
				const response = await fetch(`${url}/todos/${id}`, {
					method: 'DELETE',
				});
				loadTodos(); // Reload task list
			}

			// Refresh button event listener
			document.getElementById('load').addEventListener('click', loadTodos);

			// Load tasks on page load
			loadTodos();
		</script>
	</body>
</html>



GitHub Pages „Å´ HTML „Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ











